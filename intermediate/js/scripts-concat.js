var TwitterSearch={search:function(a){this.insertAjaxHack(a)},insertAjaxHack:function(a){a="http://search.twitter.com/search.json?q="+escape(a)+"&callback=TwitterSearch.parseAndDisplayResults";document.writeln('<div id="twitter_search_results">');document.writeln('<span class="loading">Loading Tweets...</span>');document.writeln('<script src="'+a+'" type="text/javascript"><\/script>');document.writeln("</div>")},parseAndDisplayResults:function(a){this.parseResults(a);this.displayResults(a)},parseResults:function(a){if(a.results.length>
0)this.last_tweet_id=a.results[0].id},displayResults:function(a){for(var f=document.getElementById("twitter_search_results"),c="",d=0;d<a.results.length;d++){var b=a.results[d],g=this.sanitizeMessageText(b.text),h=new Date(b.created_at),e="odd";d%2==0&&(e="even");c+='<li class="result '+e+'" id="result_'+b.id+'">';c+='<div class="avatar"><a target="_blank" href="http://twitter.com/'+b.from_user+'"><img src="'+b.profile_image_url+'"/></a></div>';c+='<div class="text"><a target="_blank" href="http://twitter.com/'+
b.from_user+'">'+b.from_user+'</a>: <span class="msgtxt '+b.iso_language_code+'" id="msgtxt'+b.id+'">'+g+"</span></div>";c+='<div class="info">'+h.time_ago_in_words()+' ago \u00b7 <a target="_blank" class="litnv" href="http://twitter.com/home?status=@'+b.from_user+'">Reply</a>';c+="</li>"}f.innerHTML='<ol id="twitter_results">'+c+"</ol>"},sanitizeMessageText:function(a){a=a.replace("&amp;","&");a=a.replace(/(([a-zA-Z]+:\/\/)([a-z][a-z0-9_..-]*[a-z]{2,6})([a-zA-Z0-9/*-_?&%]*))/i,'<a href="$1">$1</a>');
return a=a.replace(RegExp("@([a-zA-Z0-9_]+)","g"),'@<a href="http://twitter.com/$1">$1</a>')}};
Date.prototype.time_ago_in_words=function(){distance_in_milliseconds=new Date-this;distance_in_minutes=Math.round(Math.abs(distance_in_milliseconds/6E4));return distance_in_minutes==0?"less than a minute":distance_in_minutes==1?"1 minute":distance_in_minutes<45?distance_in_minutes+" minutes":distance_in_minutes<90?"about 1 hour":distance_in_minutes<1440?"about "+Math.round(distance_in_minutes/60)+" hours":distance_in_minutes<2160?"about 1 day":distance_in_minutes<43200?Math.round(distance_in_minutes/
1440)+" days":distance_in_minutes<86400?"about 1 month":distance_in_minutes<525600?Math.round(distance_in_minutes/43200)+" months":distance_in_minutes<1051200?"about 1 year":"over "+Math.round(distance_in_minutes/525600)+" years"};
